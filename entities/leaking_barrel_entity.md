---
title: Leaking Barrel Entity
category: entities
---

# Leaking Barrel Entity

This document describes the `item_leaking_barrel_out.xml` entity, which represents a barrel that leaks a specific material when damaged.

## Core Components

### DamageModelComponent

This component defines how the barrel reacts to damage.

| Attribute                 | Description                                                                 |
| :------------------------ | :-------------------------------------------------------------------------- |
| `hp`                      | Hit points of the barrel.                                                   |
| `max_hp`                  | Maximum hit points.                                                         |
| `falling_damages`         | Whether the barrel takes damage from falling.                               |
| `falling_damage_min`      | Minimum damage from falling.                                                |
| `falling_damage_max`      | Maximum damage from falling.                                                |
| `fire_damage_amount`      | Amount of damage taken from fire.                                           |
| `fire_probability_ignition` | Probability of igniting when exposed to fire.                               |
| `blood_material`          | The material that leaks from the barrel when damaged (e.g., "oil").         |
| `materials_that_damage`   | Materials that cause damage to the barrel.                                  |
| `materials_how_much_damage` | How much damage is dealt by `materials_that_damage`.                        |

### ExplodeOnDamageComponent

This component defines the explosion behavior when the barrel is damaged.

| Attribute                 | Description                                                                 |
| :------------------------ | :-------------------------------------------------------------------------- |
| `explode_on_damage_percent` | The percentage of HP remaining at which the barrel will explode.            |
| `explode_on_death_percent`  | The percentage of HP remaining at which the barrel will explode upon death. |

#### config_explosion

Nested configuration for the explosion effect.

| Attribute                 | Description                                                                 |
| :------------------------ | :-------------------------------------------------------------------------- |
| `damage`                  | The base damage of the explosion.                                           |
| `damage_mortals`          | Whether the explosion damages living entities.                              |
| `explosion_radius`        | The radius of the explosion.                                                |
| `create_cell_material`    | The material created by the explosion (e.g., "fire").                       |
| `create_cell_probability` | The probability of creating `create_cell_material`.                         |
| `camera_shake`            | The intensity of camera shake during the explosion.                         |
| `physics_explosion_power.max` | The maximum force of the physics-based explosion.                           |
| `sparks_enabled`          | Whether sparks are generated by the explosion.                              |
| `stains_enabled`          | Whether explosion stains are created on surfaces.                           |

### HitboxComponent

Defines the physical collision area of the barrel.

| Attribute     | Description                                                                 |
| :------------ | :-------------------------------------------------------------------------- |
| `aabb_min_x`  | Minimum X-coordinate of the bounding box.                                   |
| `aabb_max_x`  | Maximum X-coordinate of the bounding box.                                   |
| `aabb_min_y`  | Minimum Y-coordinate of the bounding box.                                   |
| `aabb_max_y`  | Maximum Y-coordinate of the bounding box.                                   |
| `is_enemy`    | Whether this hitbox belongs to an enemy.                                     |
| `is_item`     | Whether this hitbox belongs to an item.                                      |
| `is_player`   | Whether this hitbox belongs to the player.                                   |

### PhysicsImageShapeComponent

Defines the visual representation and physical properties of the barrel's shape.

| Attribute   | Description                                                                 |
| :---------- | :-------------------------------------------------------------------------- |
| `image_file`| The path to the image file used for the barrel's sprite.                    |
| `material`  | The material type of the barrel (e.g., "plastic").                          |

### ParticleEmitterComponent

This component is configured to emit particles, but its current settings suggest it might be for visual effects rather than leaking.

| Attribute                 | Description                                                                 |
| :------------------------ | :-------------------------------------------------------------------------- |
| `emitted_material_name`   | The name of the material to be emitted as particles.                        |
| `count_min`               | Minimum number of particles emitted per emission.                           |
| `count_max`               | Maximum number of particles emitted per emission.                           |
| `lifetime_min`            | Minimum lifetime of emitted particles.                                      |
| `lifetime_max`            | Maximum lifetime of emitted particles.                                      |
| `emission_interval_min_frames` | Minimum frames between particle emissions.                                |
| `emission_interval_max_frames` | Maximum frames between particle emissions.                                |

## Summary

The `item_leaking_barrel_out.xml` entity is a destructible object that can explode when damaged. Its primary characteristic is its ability to leak a specific `blood_material` (defined in `DamageModelComponent`) when it sustains damage. The `ExplodeOnDamageComponent` further enhances its utility by allowing it to act as an explosive hazard, creating a specified material and damaging entities within its radius. The `HitboxComponent` and `PhysicsImageShapeComponent` define its physical presence and appearance in the game world. The `ParticleEmitterComponent` is present but its current configuration might not be directly tied to the leaking mechanic.